# Maya Outliner - AuroraView ç¤ºä¾‹

[![Vue 3](https://img.shields.io/badge/Vue-3.5-4FC08D?logo=vue.js&logoColor=white)](https://vuejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.7-3178C6?logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Vite](https://img.shields.io/badge/Vite-6.0-646CFF?logo=vite&logoColor=white)](https://vitejs.dev/)
[![AuroraView](https://img.shields.io/badge/AuroraView-Rust-orange?logo=rust&logoColor=white)](../../README_zh.md)

[English Documentation](./README.md) | [å¿«é€Ÿå¼€å§‹](./QUICKSTART.md)

ä½¿ç”¨ **AuroraView**ã€**Vue 3** å’Œ **TypeScript** æ„å»ºçš„ç°ä»£åŒ–ã€åŸºäº Web çš„ Maya å¤§çº²è§†å›¾ã€‚æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ç›´æ¥åµŒå…¥ Maya çš„ç°ä»£ Web æŠ€æœ¯åˆ›å»ºé«˜æ€§èƒ½ DCC å·¥å…·ã€‚

## âœ¨ ç‰¹æ€§

- ğŸŒ³ **å±‚çº§åœºæ™¯æ ‘** - æ˜¾ç¤º Maya åœºæ™¯å±‚çº§ç»“æ„ï¼Œæ”¯æŒèŠ‚ç‚¹å±•å¼€/æŠ˜å 
- ğŸ¯ **å®æ—¶é€‰æ‹©åŒæ­¥** - Maya å’Œ UI ä¹‹é—´çš„åŒå‘é€‰æ‹©åŒæ­¥
- ğŸ‘ï¸ **å¯è§æ€§åˆ‡æ¢** - ç›´æ¥ä»å¤§çº²è§†å›¾æ˜¾ç¤º/éšè—å¯¹è±¡
- ğŸ” **æœç´¢ä¸è¿‡æ»¤** - æŒ‰åç§°å¿«é€ŸæŸ¥æ‰¾èŠ‚ç‚¹
- âš¡ **é«˜æ€§èƒ½** - ä½¿ç”¨ AuroraView ä¼˜åŒ–çš„ IPC æµç•…å¤„ç† 10,000+ èŠ‚ç‚¹
- ğŸ¨ **ç°ä»£åŒ– UI** - ä½¿ç”¨ Vue 3 æ„å»ºçš„ç®€æ´æ·±è‰²ä¸»é¢˜ç•Œé¢
- ğŸ”„ **å®æ—¶æ›´æ–°** - åœºæ™¯å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–° UI

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Maya (Python)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   maya_outliner.py                â”‚  â”‚
â”‚  â”‚   - åœºæ™¯å±‚çº§æŸ¥è¯¢                   â”‚  â”‚
â”‚  â”‚   - é€‰æ‹©ç®¡ç†                       â”‚  â”‚
â”‚  â”‚   - å¯è§æ€§æ§åˆ¶                     â”‚  â”‚
â”‚  â”‚   - Maya å›è°ƒ                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚ AuroraView IPC            â”‚
â”‚              â”‚ (åŸºäºçº¿ç¨‹, <1Î¼s)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   WebView (åµŒå…¥å¼)                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Vue 3 å‰ç«¯                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - OutlinerTree.vue         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - TreeNode.vue             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - useMayaIPC composable    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ å®‰è£…

### å‰ç½®è¦æ±‚

- **Maya 2020+** (Python 3.7+)
- **Node.js 18+** å’Œ npm
- åœ¨ Maya çš„ Python ç¯å¢ƒä¸­å®‰è£… **AuroraView**

### å®‰è£… AuroraView

```bash
# åœ¨ Maya çš„ Python ä¸­ä½¿ç”¨ pip
mayapy -m pip install auroraview
```

### å®‰è£…å‰ç«¯ä¾èµ–

```bash
cd examples/maya-outliner
npm install
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿè°ƒè¯•å·¥ä½œæµï¼ˆæ¨èï¼‰

**ä½¿ç”¨ Just å‘½ä»¤ï¼š**
```bash
just maya-debug
```

è¿™å°†è‡ªåŠ¨ï¼š
1. ç»ˆæ­¢æ‰€æœ‰ Maya è¿›ç¨‹
2. é‡æ–°ç¼–è¯‘ Rust æ ¸å¿ƒ
3. è®¾ç½® PYTHONPATH
4. å¯åŠ¨ Maya 2024

**ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼š**
```bash
cd examples/maya-outliner
launch_maya_debug.bat
```

**Maya å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½ï¼š**
å¤åˆ¶ `userSetup.py` åˆ° Maya çš„è„šæœ¬æ–‡ä»¶å¤¹ï¼š
```bash
# Windows
copy userSetup.py "C:\Users\<username>\Documents\maya\2024\scripts\"
```

ç„¶åé‡å¯ Maya - ä½ ä¼šåœ¨ AuroraView å·¥å…·æ¶ä¸Šçœ‹åˆ° "Outliner" æŒ‰é’®ï¼

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¼€å‘å·¥ä½œæµï¼ˆæ¨èç»™è´¡çŒ®è€…ï¼‰

**ä¸€æ¬¡æ€§è®¾ç½®ï¼š**
```bash
just maya-setup-dev
```

è¿™ä¼šåˆ›å»ºè½¯è¿æ¥ï¼Œè®©ä½ çš„ä»£ç ä¿®æ”¹ç«‹å³åœ¨ Maya ä¸­ç”Ÿæ•ˆã€‚

**æ—¥å¸¸å¼€å‘ï¼š**
```bash
just maya-dev
```

è¿™ä¼šé‡æ–°ç¼–è¯‘ Rust æ ¸å¿ƒå¹¶å¯åŠ¨ Mayaã€‚ç‚¹å‡» AuroraView å·¥å…·æ¶ä¸Šçš„ "Outliner" æŒ‰é’®å³å¯ï¼

ğŸ“– **æŸ¥çœ‹ [DEVELOPMENT.md](DEVELOPMENT.md) è·å–å®Œæ•´å¼€å‘æŒ‡å—**

### å¼€å‘æ¨¡å¼ï¼ˆæ‰‹åŠ¨æ–¹å¼ï¼‰

1. **å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨:**

```bash
npm run dev
```

è¿™å°†åœ¨ `http://localhost:5173` å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œæ”¯æŒçƒ­é‡è½½ã€‚

2. **åœ¨ Maya ä¸­è¿è¡Œ:**

æ‰“å¼€ Maya çš„è„šæœ¬ç¼–è¾‘å™¨å¹¶è¿è¡Œ:

```python
from maya_integration import maya_outliner

# ä½¿ç”¨å¼€å‘æœåŠ¡å™¨ï¼ˆé»˜è®¤ï¼‰
outliner = maya_outliner.main()

# å…³é—­çª—å£
outliner.close()
```

å¤§çº²è§†å›¾çª—å£å°†æ‰“å¼€å¹¶è‡ªåŠ¨è¿æ¥åˆ° Vite å¼€å‘æœåŠ¡å™¨ã€‚

### ç”Ÿäº§æ¨¡å¼

1. **æ„å»ºå‰ç«¯:**

```bash
npm run build
```

2. **åœ¨ Maya ä¸­ä½¿ç”¨æœ¬åœ°æ„å»º:**

```python
from maya_integration import maya_outliner

# ä½¿ç”¨æœ¬åœ°æ„å»ºæ–‡ä»¶ï¼ˆä¸éœ€è¦å¼€å‘æœåŠ¡å™¨ï¼‰
outliner = maya_outliner.main(use_local=True)

# å…³é—­çª—å£
outliner.close()
```

2. **æä¾›æ„å»ºæ–‡ä»¶:**

```bash
npm run preview
```

3. **åœ¨ Maya ä¸­è¿è¡Œ** (ä¸å¼€å‘æ¨¡å¼ç›¸åŒ)

## ğŸ¯ åŠŸèƒ½æ¼”ç¤º

### åœºæ™¯å±‚çº§

å¤§çº²è§†å›¾å°† Maya åœºæ™¯æ˜¾ç¤ºä¸ºå±‚çº§æ ‘:

- **å˜æ¢èŠ‚ç‚¹** ğŸ“
- **ç½‘æ ¼èŠ‚ç‚¹** ğŸ”·
- **ç›¸æœºèŠ‚ç‚¹** ğŸ“·
- **ç¯å…‰èŠ‚ç‚¹** ğŸ’¡
- **éª¨éª¼èŠ‚ç‚¹** ğŸ¦´
- **å®šä½å™¨èŠ‚ç‚¹** ğŸ“

### é€‰æ‹©åŒæ­¥

- åœ¨å¤§çº²è§†å›¾ä¸­**ç‚¹å‡»èŠ‚ç‚¹** â†’ Maya é€‰ä¸­å®ƒ
- **åœ¨ Maya ä¸­é€‰æ‹©** â†’ å¤§çº²è§†å›¾é«˜äº®æ˜¾ç¤º
- **å®æ—¶æ›´æ–°**ï¼Œå»¶è¿Ÿ <1ms

### å¯è§æ€§æ§åˆ¶

- ç‚¹å‡» ğŸ‘ï¸ å›¾æ ‡åˆ‡æ¢å¯è§æ€§
- æ›´æ”¹ç«‹å³åæ˜ åœ¨ Maya è§†å£ä¸­
- æ”¯æŒå±‚çº§å¯è§æ€§

### æœç´¢ä¸è¿‡æ»¤

- åœ¨æœç´¢æ¡†ä¸­è¾“å…¥ä»¥è¿‡æ»¤èŠ‚ç‚¹
- åŒ¹é…èŠ‚ç‚¹åç§°(ä¸åŒºåˆ†å¤§å°å†™)
- æ˜¾ç¤ºåŒ¹é…çš„èŠ‚ç‚¹åŠå…¶çˆ¶èŠ‚ç‚¹

## ğŸ“Š æ€§èƒ½åŸºå‡†

åœ¨ Windows 10, Intel i7-9700K, 32GB RAM ä¸Šæµ‹è¯•:

| èŠ‚ç‚¹æ•° | åŠ è½½æ—¶é—´ | é€‰æ‹©å»¶è¿Ÿ | å†…å­˜ä½¿ç”¨ |
|--------|---------|---------|---------|
| 100    | <10ms   | <1ms    | ~15MB   |
| 1,000  | ~50ms   | <1ms    | ~25MB   |
| 10,000 | ~300ms  | <2ms    | ~80MB   |

**ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«?**

- **åŸºäºçº¿ç¨‹çš„ IPC** è€Œé HTTP/WebSocket
- **Crossbeam é€šé“** å®ç°æ— é”é€šä¿¡
- **æ¶ˆæ¯æ‰¹å¤„ç†** (16ms çª—å£, ~60 FPS)
- **é«˜æ•ˆçš„ Vue 3 æ¸²æŸ“** ä½¿ç”¨è™šæ‹Ÿ DOM

## ğŸ› ï¸ å¼€å‘

### é¡¹ç›®ç»“æ„

```
maya-outliner/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ OutlinerTree.vue    # ä¸»æ ‘ç»„ä»¶
â”‚   â”‚   â””â”€â”€ TreeNode.vue         # å•ä¸ªèŠ‚ç‚¹ç»„ä»¶
â”‚   â”œâ”€â”€ composables/
â”‚   â”‚   â””â”€â”€ useMayaIPC.ts        # IPC é€šä¿¡å±‚
â”‚   â”œâ”€â”€ types.ts                 # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ App.vue                  # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.ts                  # å…¥å£ç‚¹
â”‚   â””â”€â”€ style.css                # å…¨å±€æ ·å¼
â”œâ”€â”€ maya/
â”‚   â”œâ”€â”€ maya_outliner.py         # Maya åç«¯
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

### æ·»åŠ æ–°åŠŸèƒ½

**1. æ·»åŠ æ–°çš„ IPC äº‹ä»¶:**

å‰ç«¯ (`useMayaIPC.ts`):
```typescript
sendToMaya('my_event', { data: 'value' })
```

åç«¯ (`maya_outliner.py`):
```python
@self.webview.on("my_event")
def handle_my_event(data):
    print(f"Received: {data}")
```

**2. æ·»åŠ æ–°çš„ UI ç»„ä»¶:**

åˆ›å»º `src/components/MyComponent.vue` å¹¶åœ¨ `App.vue` ä¸­å¯¼å…¥ã€‚

**3. æ·»åŠ æ–°çš„èŠ‚ç‚¹å±æ€§:**

æ›´æ–° `src/types.ts` ä¸­çš„ `MayaNode` æ¥å£ï¼Œå¹¶ä¿®æ”¹ `maya_outliner.py` ä¸­çš„ `get_scene_hierarchy()`ã€‚

## ğŸ› æ•…éšœæ’é™¤

**è¯¦ç»†è§£å†³æ–¹æ¡ˆè¯·æŸ¥çœ‹ [TROUBLESHOOTING.md](./TROUBLESHOOTING.md)**

### å¸¸è§é—®é¢˜

**WebView ç©ºç™½ / æ— æ³•è¯»å–æ•°æ®:**
- å·²ä¿®å¤!ç°åœ¨ä½¿ç”¨æ­£ç¡®çš„ CustomEvent IPC
- è¯¦è§æ•…éšœæ’é™¤æŒ‡å—

**æ¨¡å—æœªæ‰¾åˆ°:**
```bash
npm install  # å®‰è£…å‰ç«¯ä¾èµ–
mayapy -m pip install auroraview  # å®‰è£… AuroraView
```

**Vite æœåŠ¡å™¨æœªè¿è¡Œ:**
```bash
npm run dev  # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```

**æ— éœ€ Maya æµ‹è¯• IPC:**
```bash
python test_ipc.py  # åŸºç¡€ IPC æµ‹è¯•
python test_standalone.py  # å®Œæ•´ outliner (mock æ•°æ®)
```

## ğŸ“š äº†è§£æ›´å¤š

- [AuroraView æ–‡æ¡£](../../README_zh.md)
- [Vue 3 æ–‡æ¡£](https://cn.vuejs.org/)
- [Vite æ–‡æ¡£](https://cn.vitejs.dev/)
- [Maya Python API](https://help.autodesk.com/view/MAYAUL/2024/CHS/?guid=Maya_SDK_py_ref_index_html)

## ğŸ“„ è®¸å¯è¯

æ­¤ç¤ºä¾‹æ˜¯ AuroraView é¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œéµå¾ªç›¸åŒçš„è®¸å¯è¯ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®!è¯·éšæ—¶æäº¤é—®é¢˜æˆ–æ‹‰å–è¯·æ±‚ã€‚

---

**ä½¿ç”¨ AuroraView ç”¨ â¤ï¸ æ„å»º**

